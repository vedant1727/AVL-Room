/*----------------------------------------------------------------------*

 	VALIDIN.JS
	made by Thom Hines
	MIT License

*----------------------------------------------------------------------*/
function validateInput(e,r,a){if(has_error=!1,error_message="",e.attr("required")&&""==e.val())has_error=!0,error_message="This field is required.";else if(e.attr("required")||""!=e.val())if(e.attr("validate"))for(reqs=e.attr("validate").split("|"),x=0;x<reqs.length;x++){if(req_values=reqs[x].split(":"),a.tests[req_values[0]]?validation_exp=a.tests[req_values[0]]:validation_exp=a.validation_tests[req_values[0]],"regex"==req_values[0]){var s="";regex_array=req_values,regex_array.splice(0,1),regex=regex_array.join(":"),"/"==regex.substr(0,1)&&(regex=regex.substr(1)),regex.lastIndexOf("/")>=regex.length-3&&(s=regex.substr(regex.lastIndexOf("/")+1),regex=regex.substr(0,regex.lastIndexOf("/"))),regex=new RegExp(regex,s),""!=e.val().replace(regex,"")&&(has_error=!0,error_message=validation_exp.error_message)}"min"==req_values[0]&&(parseFloat(e.val())<parseFloat(req_values[1])||parseFloat(e.val())!=e.val())&&(has_error=!0,error_message=validation_exp.error_message.replace("%i",req_values[1])),"max"==req_values[0]&&(parseFloat(e.val())>parseFloat(req_values[1])||parseFloat(e.val())!=e.val())&&(has_error=!0,error_message=validation_exp.error_message.replace("%i",req_values[1])),"min_length"==req_values[0]&&e.val().length<req_values[1]?(has_error=!0,error_message=validation_exp.error_message.replace("%i",req_values[1])):"max_length"==req_values[0]&&e.val().length>req_values[1]?(has_error=!0,error_message=validation_exp.error_message.replace("%i",req_values[1])):"match"==req_values[0]&&e.val()!=$(req_values[1]).val()?(has_error=!0,error_message=validation_exp.error_message.replace("%i",req_values[1])):""!=e.val().replace(validation_exp.regex,"")&&(has_error=!0,error_message=validation_exp.error_message)}else has_error=!1,error_message="";else has_error=!1,error_message="";clearTimeout(validation_debounce_timeout),r?(attachMessage(e,error_message),has_error?e.attr("aria-invalid","true").addClass(options.invalid_input_class):e.attr("aria-invalid","false").removeClass(options.invalid_input_class),disableParentForm(e.closest("form"))):validation_debounce_timeout=setTimeout(function(){attachMessage(e,error_message),has_error?e.attr("aria-invalid","true").addClass(options.invalid_input_class):e.attr("aria-invalid","false").removeClass(options.invalid_input_class),disableParentForm(e.closest("form"))},a.feedback_delay),a.onValidateInput&&a.onValidateInput({input:e[0],has_error:error_message.length>0,error_message:error_message})}function attachMessage(e,r){return""==r&&e.next().hasClass("validation_error")?void e.next().fadeOut(400,function(){e.next().remove()}):void(""!=r&&(e.next().hasClass("validation_error")||e.after('<div class="'+options.error_message_class+'"></div>'),options.override_input_margins&&(message_margin_top=parseInt(e.next().css("margin-top")),message_margin_bottom=parseInt(e.next().css("margin-bottom")),input_margin=parseInt(e.css("margin-bottom")),e.next().css("margin-top",-input_margin+5+"px").css("margin-bottom",input_margin-5+"px")),e.next().html()!=r&&e.next().hide().html(r).fadeIn(400)))}function disableParentForm(e){has_error=!1,e.find(':input[aria-invalid="true"]').length&&(has_error=!0),e.find(":input[required]").filter(function(){return""==jQuery(this).val()}).length&&(has_error=!0),has_error?e.find('button, input[type="submit"]').prop("disabled",!0):e.find('button, input[type="submit"]').prop("disabled",!1)}var options={validation_tests:{alpha:{regex:/[a-zA-Z]*/,error_message:"This can only contain only letters"},alpha_num:{regex:/[A-Z0-9]*/i,error_message:"This can only contain letters and numbers"},alpha_space:{regex:/[A-Z ]*/i,error_message:"This can only contain letters"},alpha_dash:{regex:/[A-Z\.\-_]*/i,error_message:"This can only contain letters, underscores and hyphens"},alpha_num_dash:{regex:/[A-Z0-9\.\-_]*/i,error_message:"This can only contain letters, numbers, underscores and hyphens"},number:{regex:/[\d]*/,error_message:"This needs to be a valid whole number"},decimal:{regex:/(\d*\.?\d*)/,error_message:"This needs to be a valid number"},name:{regex:/[A-Z\.\-'\s]*/i,error_message:"This needs to be a valid name"},email:{regex:/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}/i,error_message:"This needs to be a valid email address"},url:{regex:/(https?|ftp):\/\/[^\s\/$.?#].[^\s]*/i,error_message:"This needs to be a valid URL"},phone:{regex:/(?=.*?\d{3}( |-|.)?\d{4})((?:\+?(?:1)(?:\1|\s*?))?(?:(?:\d{3}\s*?)|(?:\((?:\d{3})\)\s*?))\1?(?:\d{3})\1?(?:\d{4})(?:\s*?(?:#|(?:ext\.?))(?:\d{1,5}))?)\b/i,error_message:"This needs to be a valid phone number"},zip:{regex:/\d{5}(?:-?\d{4})?/i,error_message:"This needs to be a valid zip code"},creditcard:{regex:/(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})/i,error_message:"This needs to be a valid credit card number"},regex:{regex:/.*/i,error_message:"This is not a valid value"},min:{regex:/.*/i,error_message:"This number needs to be at least %i"},max:{regex:/.*/i,error_message:"This number needs to no more than %i"},min_length:{regex:/.*/i,error_message:"This needs to be at least %i characters long"},max_length:{regex:/.*/i,error_message:"This needs to be no more than %i characters long"},match:{regex:/.*/i,error_message:"These values have to match"}},feedback_delay:700,invalid_input_class:"invalid",error_message_class:"validation_error",override_input_margins:!0,tests:{},onValidateInput:function(){}};jQuery.fn.validin=function(e){jQuery(this).is("form")?jQuery(this).applyValidation(e):jQuery(this).find("form").applyValidation(e)},jQuery.fn.applyValidation=function(e){jQuery.extend(options,e),$form=jQuery(this),$inputs=$form.find(":input"),disableParentForm($form),$inputs.on("input blur",function(e){"true"==jQuery(this).attr("aria-invalid")||"blur"==e.type?validateInput(jQuery(this),!0,options):validateInput(jQuery(this),!1,options)}),$inputs.keypress(function(e){13==e.keyCode&&($inputs.each(function(){validateInput(jQuery(this),!0,options)}),$form.find(':input[aria-invalid="true"]').first().focus())})};var validation_debounce_timeout;
